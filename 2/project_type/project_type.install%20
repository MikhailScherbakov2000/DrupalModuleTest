<?php

use Drupal\node\Entity\NodeType;
use Drupal\field\Entity\FieldStorageConfig;
use Drupal\field\Entity\FieldConfig;

/**
 * Èìïëåìåíòàöèÿ hook_install() ìîäóëÿ project_type.
 */
function project_type_install() {
  // Ñîçäà¸ì òèï êîíòåíòà "Ïğîåêò"
  if (!NodeType::load('project')) {
    $project = NodeType::create([
      'type' => 'project',
      'name' => 'Ïğîåêò',
    ]);
    $project->save();
  }
    if (!FieldStorageConfig::loadByName('node', 'field_description')) {
    FieldStorageConfig::create([
      'field_name' => 'field_description',
      'entity_type' => 'node',
      'type' => 'text_long',
      'cardinality' => 1,
      'settings' => [
        'max_length' => 5000,
      ],
    ])->save();
  }
  if (!FieldConfig::loadByName('node', 'project', 'field_description')) {
    FieldConfig::create([
      'field_name' => 'field_description',
      'entity_type' => 'node',
      'bundle' => 'project',
      'label' => 'Îïèñàíèå',
      'required' => FALSE,
      'settings' => [],
      'description' => 'Îòäåëüíîå ïîëå Îïèñàíèå',
    ])->save();
  }

  if (!FieldStorageConfig::loadByName('node', 'field_image')) {
    FieldStorageConfig::create([
      'field_name' => 'field_image',
      'entity_type' => 'node',
      'type' => 'image',
      'cardinality' => 1,
      'settings' => [
        'uri_scheme' => 'public',
        'default_image' => [],
      ],
    ])->save();
  }
  if (!FieldConfig::loadByName('node', 'project', 'field_image')) {
    FieldConfig::create([
      'field_name' => 'field_image',
      'entity_type' => 'node',
      'bundle' => 'project',
      'label' => 'Èçîáğàæåíèå',
      'required' => FALSE,
      'settings' => [
        'alt_field' => TRUE,
        'title_field' => FALSE,
      ],
      'description' => 'Èçîáğàæåíèå ïğîåêòà',
    ])->save();
  }

  // Ïîëå "Äàòà îêîí÷àíèÿ" (date)
  if (!FieldStorageConfig::loadByName('node', 'field_end_date')) {
    FieldStorageConfig::create([
      'field_name' => 'field_end_date',
      'entity_type' => 'node',
      'type' => 'datetime',
      'cardinality' => 1,
      'settings' => [
        'datetime_type' => 'date',
      ],
    ])->save();
  }
  if (!FieldConfig::loadByName('node', 'project', 'field_end_date')) {
    FieldConfig::create([
      'field_name' => 'field_end_date',
      'entity_type' => 'node',
      'bundle' => 'project',
      'label' => 'Äàòà îêîí÷àíèÿ',
      'required' => FALSE,
      'settings' => [],
      'description' => 'Äàòà çàâåğøåíèÿ ïğîåêòà',
    ])->save();
  }
}
